# .github/workflows/validate.yml

name: ğŸ” Modultool-CodeprÃ¼fung & Barrierecheck

on:
  push:
    branches: [main, dev]
  pull_request:
    branches: [main, dev]

jobs:
  validate:
    name: ğŸ”§ Struktur-, Syntax- und Barrierefreiheitstests
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Repository auschecken
      uses: actions/checkout@v4

    - name: ğŸ§° AbhÃ¤ngigkeiten installieren
      run: |
        sudo apt-get update
        sudo apt-get install -y jq shellcheck curl npm
        npm install -g jsonlint htmlhint axe-core

    # ğŸ” JSON-PrÃ¼fung aller Dateien
    - name: âœ… JSON-Struktur validieren
      run: |
        find . -name "*.json" -not -path "./node_modules/*" -exec jsonlint -q {} \;

    # ğŸ§ª HTMLHint: Barriere- und StrukturprÃ¼fung von .html-Dateien
    - name: âœ… HTML-Struktur prÃ¼fen
      run: |
        find . -name "*.html" -not -path "./node_modules/*" -exec htmlhint {} \;

    # ğŸ§¼ Shell-Skripte auf Fehler prÃ¼fen
    - name: âœ… Shell-Skripte prÃ¼fen
      run: |
        find . -name "*.sh" -exec shellcheck {} +

    # â™¿ Accessibility Check mit axe-core (Headless Chrome)
    - name: â™¿ Accessibility-Test mit axe-core
      run: |
        npx axe https://example.com --quiet || echo "âš ï¸ Hinweis: axe-core benÃ¶tigt ein testbares Deployment mit URL."
      continue-on-error: true

    # ğŸ“‚ Projektstruktur anzeigen (optional logbar)
    - name: ğŸ“‚ Projektstruktur auflisten
      run: |
        find . -type f | sort
