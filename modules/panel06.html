<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Panel06 – Story-Sampler</title>
<style>
  #panel06{display:grid;gap:0.5rem;max-width:340px;margin:auto;font-family:var(--font-family, sans-serif);}
  textarea{min-height:100px;resize:vertical;}
  input,textarea,button{font-size:var(--base-font,1rem);border-radius:var(--btn-radius,0.5rem);}
  #random-output{font-weight:bold;margin-top:0.5rem;}
  #log{max-height:100px;overflow-y:auto;padding-left:1rem;}
  @media(min-width:600px){#panel06{max-width:520px;}}
</style>
</head>
<body>
<div id="panel06">
  <h2>Story-Sampler</h2>
  <label for="story-input">Story-Ideen (je Zeile eine):</label>
  <textarea id="story-input" aria-label="Story-Ideen"></textarea>
  <button id="save-btn">Speichern</button>
  <button id="random-btn">Zufall</button>
  <button id="copy-btn">Kopieren</button>
  <div id="random-output" role="status" aria-live="polite"></div>
  <ul id="log"></ul>
  <div id="status" role="status" aria-live="polite"></div>
</div>
<script type="module">
const input=document.getElementById('story-input');
const saveBtn=document.getElementById('save-btn');
const randomBtn=document.getElementById('random-btn');
const copyBtn=document.getElementById('copy-btn');
const output=document.getElementById('random-output');
const log=document.getElementById('log');
const status=document.getElementById('status');
const STORE_KEY='storySampler';
const DASH_KEY='dashboardLog';
function showStatus(msg){status.textContent=msg;setTimeout(()=>status.textContent='',3000);}
function loadList(){try{return JSON.parse(localStorage.getItem(STORE_KEY))||[];}catch(e){showStatus('Laden fehlgeschlagen');return [];}}
function saveList(list){try{localStorage.setItem(STORE_KEY,JSON.stringify(list));}catch(e){showStatus('Speichern fehlgeschlagen');}}
function addDashboard(val){const arr=JSON.parse(localStorage.getItem(DASH_KEY)||'[]');arr.unshift({time:new Date().toLocaleTimeString(),value:val});if(arr.length>10) arr.length=10;localStorage.setItem(DASH_KEY,JSON.stringify(arr));}
function render(){const list=loadList();input.value=list.join('\n');}
saveBtn.addEventListener('click',()=>{const list=input.value.split('\n').map(s=>s.trim()).filter(Boolean);saveList(list);showStatus('Gespeichert');});
randomBtn.addEventListener('click',()=>{const list=input.value.split('\n').map(s=>s.trim()).filter(Boolean);if(list.length===0){showStatus('Keine Einträge');return;}const choice=list[Math.floor(Math.random()*list.length)];output.textContent=choice;const li=document.createElement('li');li.textContent=new Date().toLocaleTimeString()+': '+choice;log.prepend(li);addDashboard(choice);});
copyBtn.addEventListener('click',()=>{const text=output.textContent;if(!text){showStatus('Nichts zum Kopieren');return;}navigator.clipboard.writeText(text).then(()=>{copyBtn.style.backgroundColor='#15b57b';setTimeout(()=>{copyBtn.style.backgroundColor='';},800);});});
render();
</script>
</body>
</html>
